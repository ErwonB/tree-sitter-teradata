================================================================================
Empty transaction
================================================================================

bt;
et;

--------------------------------------------------------------------------------

(program
  (transaction
    (keyword_bt)
    (keyword_et)))

================================================================================
Transaction begin and commit
================================================================================

bt;
ALTER TABLE my_table
  ADD COLUMN val3 VARCHAR(100) NOT NULL;
UPDATE my_table SET val3 = 'new';
et;

--------------------------------------------------------------------------------

(program
  (transaction
    (keyword_bt)
    (statement
      (alter_table
        (keyword_alter)
        (keyword_table)
        (object_reference
          name: (identifier))
        (add_column
          (keyword_add)
          (keyword_column)
          (column_definition
            name: (identifier)
            type: (varchar
              (keyword_varchar)
              size: (literal))
            (keyword_not)
            (keyword_null)))))
    (statement
      (update
        (keyword_update)
        (relation
          (object_reference
            name: (identifier)))
        (keyword_set)
        (assignment
          left: (field
            name: (identifier))
          right: (literal))))
    (keyword_et)))

================================================================================
Transaction begin and rollback
================================================================================

bt;
ALTER TABLE my_table
  ADD COLUMN val3 VARCHAR(100) NOT NULL;
rollback;

--------------------------------------------------------------------------------

(program
  (transaction
    (keyword_bt)
    (statement
      (alter_table
        (keyword_alter)
        (keyword_table)
        (object_reference
          name: (identifier))
        (add_column
          (keyword_add)
          (keyword_column)
          (column_definition
            name: (identifier)
            type: (varchar
              (keyword_varchar)
              size: (literal))
            (keyword_not)
            (keyword_null)))))
    (keyword_rollback)))

================================================================================
Transaction begin and abort
================================================================================

bt;
ALTER TABLE my_table
  ADD COLUMN val3 VARCHAR(100) NOT NULL;
abort;

--------------------------------------------------------------------------------

(program
  (transaction
    (keyword_bt)
    (statement
      (alter_table
        (keyword_alter)
        (keyword_table)
        (object_reference
          name: (identifier))
        (add_column
          (keyword_add)
          (keyword_column)
          (column_definition
            name: (identifier)
            type: (varchar
              (keyword_varchar)
              size: (literal))
            (keyword_not)
            (keyword_null)))))
    (keyword_abort)))
================================================================================
Use explicit transaction keywords
================================================================================

bt;
ALTER TABLE my_table
  ADD COLUMN val3 VARCHAR(100) NOT NULL;
ROLLBACK TRANSACTION;

--------------------------------------------------------------------------------

(program
  (transaction
    (keyword_bt)
    (statement
      (alter_table
        (keyword_alter)
        (keyword_table)
        (object_reference
          name: (identifier))
        (add_column
          (keyword_add)
          (keyword_column)
          (column_definition
            name: (identifier)
            type: (varchar
              (keyword_varchar)
              size: (literal))
            (keyword_not)
            (keyword_null)))))
    (keyword_rollback)
    (keyword_transaction)))
